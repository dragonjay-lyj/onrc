---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar';

const { slug } = Astro.params;

// 获取所有游戏
const games = await getCollection('game');

// 根据 slug 查找对应的游戏
const game = games.find((g) => g.slug === slug);

if (!game) {
  throw new Error(`Game not found: ${slug}`);
}

const { Content } = await game.render();
---

<Layout title={game.data.title}>
<main>
  <Navbar client:visible />
  <div class="container mx-auto p-8">
    <article class="prose lg:prose-xl">
      <h1 class="text-3xl font-bold mb-4">{game.data.title}</h1>
      <Content />
    </article>
    </div>
</main>
</Layout>
